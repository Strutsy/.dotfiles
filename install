#!/bin/bash

dotfiles=(".bashrc" ".tmux.conf")
force=""

if [ "$1" == "-f" ]; then
    force="$1"
fi

echo "Symlinking dotfiles to $HOME/..."
for i in "${dotfiles[@]}"; do
    ln -s $force $PWD/$i $HOME/
done

echo "Symlinking config folders to $HOME/.config/..."
ln -s $force $PWD/nvim $HOME/.config/

echo "Loading GNOME keybindings..."
dconf load /org/gnome/desktop/input-sources/ < input-sources.dconf
dconf load /org/gnome/desktop/peripherals/mouse/ < mouse.dconf
dconf load /org/gnome/desktop/wm/ < wm.dconf
dconf load /org/gnome/settings-daemon/plugins/media-keys/ < media-keys.dconf
dconf load /org/gnome/shell/extensions/dash-to-dock/ < dash-to-dock.dconf
dconf load /org/gnome/desktop/interface/ < interface.dconf

echo -n "Install packages from the pkglist file? [y/N]: "
read answer

if [ "$answer" != "${answer#[Yy]}" ]; then
    sudo apt install $(cat pkglist)
fi

echo "Done!"
